---
layout: post
title:  "ğŸ‘œ JSæ•°æ®ç±»å‹"
date:   2019-03-27 22:08:03
categories: [JavaScript]
tags: [JavaScript]
comments: true
---
åŸºæœ¬ç±»å‹ï¼šNumberã€Stringã€Booleanã€Nullã€Udefinedï¼›å¼•ç”¨ç±»å‹ï¼šObjectã€Functionã€Arrayã€Dataç­‰ã€‚å…³äºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Œé™¤äº†è¿™äº›ï¼Œä½ è¿˜è¦çŸ¥é“çš„:
<!--more-->

## åœ¨å†…å­˜ä¸­çš„ä½ç½®ä¸åŒ

* **åŸºæœ¬ç±»å‹ï¼šå ç”¨ç©ºé—´å›ºå®šï¼Œä¿å­˜åœ¨æ ˆä¸­**
* **å¼•ç”¨ç±»å‹ï¼šå ç”¨ç©ºé—´ä¸å›ºå®šï¼Œä¿å­˜åœ¨å †ä¸­**

>**æ ˆï¼ˆstackï¼‰**ä¸ºè‡ªåŠ¨åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œå®ƒç”±ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾ï¼›ä½¿ç”¨ä¸€çº§ç¼“å­˜ï¼Œè¢«è°ƒç”¨æ—¶é€šå¸¸å¤„äºå­˜å‚¨ç©ºé—´ä¸­ï¼Œè°ƒç”¨åè¢«ç«‹å³é‡Šæ”¾ã€‚
>
>**å †ï¼ˆheapï¼‰**æ˜¯åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œå¤§å°ä¸å®šä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œç”Ÿå‘½å‘¨æœŸä¸è™šæ‹Ÿæœºçš„GCç®—æ³•æœ‰å…³ã€‚

å½“ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½ä¼šå»ºç«‹è‡ªå·±çš„å†…å­˜æ ˆï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…å®šä¹‰çš„å˜é‡å°†ä¼šé€ä¸ªæ”¾å…¥è¿™å—æ ˆå†…å­˜é‡Œï¼Œéšç€æ–¹æ³•çš„æ‰§è¡Œç»“æŸï¼Œè¿™ä¸ªæ–¹æ³•çš„å†…å­˜æ ˆä¹Ÿå°†è‡ªç„¶é”€æ¯äº†ã€‚å› æ­¤ï¼Œæ‰€æœ‰åœ¨æ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡éƒ½æ˜¯æ”¾åœ¨æ ˆå†…å­˜ä¸­çš„ï¼›æ ˆä¸­å­˜å‚¨çš„æ˜¯åŸºç¡€å˜é‡ä»¥åŠä¸€äº›å¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼ŒåŸºç¡€å˜é‡çš„å€¼æ˜¯å­˜å‚¨åœ¨æ ˆä¸­ï¼Œè€Œå¼•ç”¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­çš„æ˜¯æŒ‡å‘å †ä¸­çš„æ•°ç»„æˆ–è€…å¯¹è±¡çš„åœ°å€ï¼Œè¿™å°±æ˜¯ä¸ºä½•ä¿®æ”¹å¼•ç”¨ç±»å‹æ€»ä¼šå½±å“åˆ°å…¶ä»–æŒ‡å‘è¿™ä¸ªåœ°å€çš„å¼•ç”¨å˜é‡ã€‚

å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å°†è¢«ä¿å­˜åˆ°è¿è¡Œæ—¶æ•°æ®åŒºä¸­ï¼Œä»¥ä¾¿åå¤åˆ©ç”¨ï¼ˆå› ä¸ºå¯¹è±¡çš„åˆ›å»ºæˆæœ¬é€šå¸¸è¾ƒå¤§ï¼‰ï¼Œè¿™ä¸ªè¿è¡Œæ—¶æ•°æ®åŒºå°±æ˜¯å †å†…å­˜ã€‚å †å†…å­˜ä¸­çš„å¯¹è±¡ä¸ä¼šéšæ–¹æ³•çš„ç»“æŸè€Œé”€æ¯ï¼Œå³ä½¿æ–¹æ³•ç»“æŸåï¼Œè¿™ä¸ªå¯¹è±¡è¿˜å¯èƒ½è¢«å¦ä¸€ä¸ªå¼•ç”¨å˜é‡æ‰€å¼•ç”¨ï¼ˆæ–¹æ³•çš„å‚æ•°ä¼ é€’æ—¶å¾ˆå¸¸è§ï¼‰ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¾ç„¶ä¸ä¼šè¢«é”€æ¯ï¼Œåªæœ‰å½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨å˜é‡å¼•ç”¨å®ƒæ—¶ï¼Œç³»ç»Ÿçš„åƒåœ¾å›æ”¶æœºåˆ¶æ‰ä¼šåœ¨æ ¸å®çš„æ—¶å€™å›æ”¶å®ƒã€‚

## èµ‹å€¼ã€æµ…æ‹·è´ã€æ·±æ‹·è´
* å¯¹äºåŸºæœ¬ç±»å‹å€¼ï¼Œèµ‹å€¼ã€æµ…æ‹·è´ã€æ·±æ‹·è´æ—¶éƒ½æ˜¯å¤åˆ¶åŸºæœ¬ç±»å‹çš„å€¼ç»™æ–°çš„å˜é‡ï¼Œä¹‹åä¸¤ä¸ªå˜é‡ä¹‹é—´çš„æ“ä½œä¸å†äº’ç›¸å½±å“ã€‚
* å¯¹äºå¼•ç”¨ç±»å‹å€¼ï¼š
    * **èµ‹å€¼**åä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œä¸€ä¸ªå˜é‡æ”¹å˜æ—¶ï¼Œå¦ä¸€ä¸ªä¹ŸåŒæ ·æ”¹å˜ï¼›
    * **æµ…æ‹·è´**åªå¤åˆ¶æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜ï¼›æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œæ·±å±‚æ¬¡çš„å¯¹è±¡çº§åˆ«çš„å°±æ‹·è´å¼•ç”¨ï¼›
    * **æ·±æ‹·è´**ä¼šå¦å¤–åˆ›é€ ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜ï¼Œä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šæ”¹åˆ°åŸå¯¹è±¡ï¼›æ·±æ‹·è´æ˜¯æ‹·è´å¤šå±‚ï¼Œæ¯ä¸€çº§åˆ«çš„æ•°æ®éƒ½ä¼šæ‹·è´å‡ºæ¥ã€‚

|  | å’ŒåŸæ•°æ®æ˜¯å¦æŒ‡å‘åŒä¸€å¯¹è±¡| ç¬¬ä¸€å±‚æ•°æ®ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ |åŸæ•°æ®ä¸­åŒ…å«å­å¯¹è±¡|
|:-----------|:-------------|:------------------- |:--------:|
|    èµ‹å€¼    |   æ˜¯    | æ”¹å˜ä¼šä½¿åŸæ•°æ®ä¸€åŒæ”¹å˜ | æ”¹å˜ä¼šä½¿åŸæ•°æ®ä¸€åŒæ”¹å˜  |
|    æµ…æ‹·è´  |   å¦    | æ”¹å˜ä¸ä¼šä½¿åŸæ•°æ®ä¸€åŒæ”¹å˜ | æ”¹å˜ä¼šä½¿åŸæ•°æ®ä¸€åŒæ”¹å˜ |
|    æ·±æ‹·è´  |   å¦    |  æ”¹å˜ä¸ä¼šä½¿åŸæ•°æ®ä¸€åŒæ”¹å˜| æ”¹å˜ä¸ä¼šä½¿åŸæ•°æ®ä¸€åŒæ”¹å˜ |

```javascript
var obj = {
    name:'gege',
    age:'18',
    friends:['a',['b','c'],['d','e']]
};

var clone1_obj = obj;  // èµ‹å€¼

var clone2_obj = shllowCopy(obj);
function shllowCopy(o){
    var clone_obj = {};
    for(var prop in o){
        if(o.hasOwnProperty(prop)){
            clone_obj[prop] = o[prop];
        }
    }
    return clone_obj;
}

clone1_obj.name = "lcuky";
clone2_obj.age = 19;

clone1_obj.friends[0] = 'A';
clone1_obj.friends[1] = ['B','C'];
clone2_obj.friends[2] = ['D','E'];

console.log(obj);
// obj = {
//     name:lucky,
//     age:18,
//     friends:['A',['B','C'],['D','E']]
// }
console.log(clone1_obj);
// clone1_obj = {
//     name:lucky,
//     age:18,
//     friends:['A',['B','C'],['D','E']]
// }
console.log(clone2_obj);
// clone2_obj = {
//     name:lucky,
//     age:19,
//     friends:['A',['B','C'],['D','E']]
// }
```

### æµ…æ‹·è´

æ•°ç»„å¸¸ç”¨çš„æµ…æ‹·è´æ–¹æ³•ï¼š`slice`ï¼Œ`concat`ï¼Œ`Array.from()` ï¼Œä»¥åŠ`es6çš„ææ„`ã€‚

```javascript
var arr1 = [1, 2,{a:1,b:2,c:3,d:4}];
var arr2 = arr1.slice();
var arr3 = arr1.concat();
var arr4 = Array.from(arr1);
var arr5 = [...arr1];
arr2[0]=2;
arr2[2].a=2;
arr3[0]=3;
arr3[2].b=3;
arr4[0]=4;
arr4[2].c=4;
arr5[0]=5;
arr5[2].d=5;
// arr1[1,2,{a:2,b:3,c:4,d:5}]
// arr2[2,2,{a:2,b:3,c:4,d:5}]
// arr3[3,2,{a:2,b:3,c:4,d:5}]
// arr4[4,2,{a:2,b:3,c:4,d:5}]
// arr5[5,2,{a:2,b:3,c:4,d:5}]
```
å¯¹è±¡å¸¸ç”¨çš„æµ…æ‹·è´æ–¹æ³•`Object.assign()`ï¼Œ`es6ææ„`
```javascript
var obj1 = {
    x: 1, 
    y: {
        m: 1
    }
};
var obj2 = Object.assign({}, obj1);
console.log(obj1) //{x: 1, y: {m: 1}}
console.log(obj2) //{x: 1, y: {m: 1}}
obj2.x=2;
obj2.y.m = 2; 
console.log(obj1) //{x: 1, y: {m: 2}}
console.log(obj2) //{x: 2, y: {m: 2}}
```

### æ·±æ‹·è´

`JSON.parse(JSON.stringify(obj))`æˆ‘ä»¬ä¸€èˆ¬ç”¨æ¥æ·±æ‹·è´ï¼Œå…¶è¿‡ç¨‹è¯´ç™½äº† å°±æ˜¯åˆ©ç”¨JSON.stringify å°†jså¯¹è±¡åºåˆ—åŒ–ï¼ˆJSONå­—ç¬¦ä¸²ï¼‰ï¼Œå†ä½¿ç”¨JSON.parseæ¥ååºåˆ—åŒ–(è¿˜åŸ)jså¯¹è±¡ã€‚

```javascript
var arr = ['old', 1, true, ['old1', 'old2'], {old: 1}]
var new_arr = JSON.parse( JSON.stringify(arr) );
new_arr[4].old=4;
console.log(arr); //['old', 1, true, ['old1', 'old2'], {old: 1}]
console.log(new_arr); //['old', 1, true, ['old1', 'old2'], {old: 4}]
```

ä½†æ˜¯è¦æ³¨æ„[â€œJSON.parse(JSON.stringify(obj))å®ç°æ·±æ‹·è´åº”è¯¥æ³¨æ„çš„å‘â€](https://www.imooc.com/article/70653)ï¼Œåœ¨å¹³æ—¶çš„å¼€å‘ä¸­JSON.parse(JSON.stringify(obj))å·²ç»æ»¡è¶³90%çš„ä½¿ç”¨åœºæ™¯äº†ã€‚

**å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼š**
```javascript
var deepCopy = function(obj) {
    if (typeof obj !== 'object') return;
    var newObj = obj instanceof Array ? [] : {};
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            newObj[key] = typeof obj[key] === 'object' ? deepCopy(obj[key]) : obj[key];
        }
    }
    return newObj;
}
```

## å‚æ•°çš„ä¼ é€’

æ‰€æœ‰çš„å‡½æ•°å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’ã€‚ä¹Ÿå°±æ˜¯è¯´æŠŠå‡½æ•°å¤–é¢çš„å€¼èµ‹å€¼ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠä¸€ä¸ªå€¼ä»ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªä¸€æ ·ã€‚

* åŸºæœ¬ç±»å‹
```javascript
var a = 2;
function add(x) {
 return x = x + 2;
}
var result = add(a);
console.log(a, result); // 2 4
```
* å¼•ç”¨ç±»å‹
```javascript
function setName(obj) {
  obj.name = 'laowang';
  obj = new Object();
  obj.name = 'Tom';
}
var person = new Object();
setName(person);
console.log(person.name); //laowang
```

## åˆ¤æ–­æ–¹æ³•

åŸºæœ¬ç±»å‹ç”¨typeofï¼Œå¼•ç”¨ç±»å‹ç”¨instanceofã€‚

**ç‰¹åˆ«æ³¨æ„`typeof null:object`, `null instanceof Object:true`**

```javascript
console.log(typeof "abcdef"); // string
console.log(typeof 8);        // number
console.log(typeof true);     // bollean
console.log(typeof undefined); // undefined
console.log(typeof null);      // object

var arr = [1,2,3];
var obj = {};
function f(){};

console.log(arr instanceof Array);   // true
console.log(obj instanceof Object);  // true
console.log(f instanceof Function);  // true
```
## æ€»ç»“

<img src="/image/posts/blog1201.png" style="display:block;margin:0 auto;"> 



*è½¬è‡ªï¼š[é¢è¯•å®˜é—®ä½ JavaScriptåŸºæœ¬ç±»å‹æ—¶ä»–æƒ³çŸ¥é“ä»€ä¹ˆï¼Ÿ](https://segmentfault.com/a/1190000018745719#articleHeader6)*

*å‚è€ƒï¼š[æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«ï¼Œå®ç°æ·±æ‹·è´çš„å‡ ç§æ–¹æ³•](http://www.cnblogs.com/echolun/p/7889848.html)*